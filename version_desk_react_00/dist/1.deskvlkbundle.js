webpackJsonp([1],{236:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),h=n(1),u=a(h),d=n(70),c=n(56),f=n(15),m=(a(f),n(84)),p=a(m),b=new p["default"]("https://vlk-firebase.firebaseio.com"),v=new p["default"]("https://vlk-clients.firebaseio.com"),y=function(e){function t(e){l(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={data:{},name:"",email:"",phone:"",info:"",alertVisible:!1,contactInserted:!1},n.handleSubmit=n.handleSubmit.bind(n),n.handleNameChange=n.handleNameChange.bind(n),n.handleEmailChange=n.handleEmailChange.bind(n),n.handlePhoneChange=n.handlePhoneChange.bind(n),n.handleInfoChange=n.handleInfoChange.bind(n),n.handleAlertDismiss=n.handleAlertDismiss.bind(n),n.handleAlertShow=n.handleAlertShow.bind(n),n.handleContactNotInserted=n.handleContactNotInserted.bind(n),n.handleContactInserted=n.handleContactInserted.bind(n),n}return o(t,e),r(t,[{key:"handleAlertDismiss",value:function(){this.setState({alertVisible:!1})}},{key:"handleAlertShow",value:function(){this.setState({alertVisible:!0})}},{key:"handleContactNotInserted",value:function(){this.setState({contactInserted:!1})}},{key:"handleContactInserted",value:function(){this.setState({contactInserted:!0})}},{key:"handleReturn",value:function(){c.browserHistory.push("/")}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){console.log("componentDidMount details",this.props.params),s=this.props.params.id;var e={};b.orderByChild("id").equalTo(s).on("value",function(t){t.forEach(function(t){e={id:t.val().id,title:t.val().title,details:t.val().details}}),this.setState({data:e})}.bind(this))}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"componentDidUpdate",value:function(e){}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""===this.state.name||""===this.state.email&&""===this.state.phone)this.handleAlertShow();else{var t={name:this.state.name.trim(),email:this.state.email.trim(),phone:this.state.phone.trim(),info:this.state.info.trim(),title:this.state.data.title.trim()},n=(new Date).toLocaleString(),a=v.child(n);a.set(t),this.state.name="",this.state.email="",this.state.phone="",this.state.info="",this.handleContactInserted(),setTimeout(this.handleReturn,7e3)}}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePhoneChange",value:function(e){this.setState({phone:e.target.value})}},{key:"handleInfoChange",value:function(e){this.setState({info:e.target.value})}},{key:"componentWillUnmount",value:function(){b.off(),v.off()}},{key:"render",value:function(){var e=this.state.data,t="/img/activity/"+e.id+".jpg",n=[];return this.state.alertVisible&&n.push(u["default"].createElement(d.Alert,{bsStyle:"danger",onDismiss:this.handleAlertDismiss,dismissAfter:4e3},"Необходимо ввести имя и номер телефона или емаил!")),this.state.contactInserted&&n.push(u["default"].createElement(d.Alert,{bsStyle:"danger",onDismiss:this.handleContactNotInserted,dismissAfter:4e3},"Ваши данные успешно введены!")),u["default"].createElement("div",null,u["default"].createElement(d.Button,{onClick:this.handleReturn,bsStyle:"primary",bsSize:"large",className:"pull-right"},"Возврат"),u["default"].createElement(d.Well,{bsSize:"large"},u["default"].createElement("h2",null," ",e.title)),u["default"].createElement(d.Row,null,u["default"].createElement(d.Col,{xs:6,md:4},u["default"].createElement(d.Image,{src:t,thumbnail:!0,responsive:!0})),u["default"].createElement(d.Col,{xs:12,md:8},n,u["default"].createElement("h3",null,"Оставьте свои данные: "),u["default"].createElement("form",null,u["default"].createElement(d.Input,{type:"text",label:"Имя",value:this.state.name,onChange:this.handleNameChange,placeholder:"Введите Имя"}),u["default"].createElement(d.Input,{type:"email",label:"Е-маил",value:this.state.email,onChange:this.handleEmailChange,placeholder:"Введите Е-маил"}),u["default"].createElement(d.Input,{type:"phone",label:"Телефон",value:this.state.phone,onChange:this.handlePhoneChange,placeholder:"Введите Телефон"}),u["default"].createElement(d.Input,{type:"textarea",label:"Доп. информация",value:this.state.info,onChange:this.handleInfoChange,placeholder:"Доп. информация"}),u["default"].createElement(d.ButtonInput,{bsStyle:"primary",onClick:this.handleSubmit,value:"Введите данные"})))))}}]),t}(u["default"].Component);e.exports=y}});